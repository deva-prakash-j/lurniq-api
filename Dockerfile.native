FROM ubuntu:22.04-minimal

# Install minimal runtime dependencies
RUN apt-get update && apt-get install -y \
    zlib1g \
    && rm -rf /var/lib/apt/lists/* \
    && groupadd -r appuser && useradd -r -g appuser appuser

USER appuser

# Workdir inside the container
WORKDIR /app

# Copy native binary into image
COPY build/native/nativeCompile/lurniq-api .

# Expose the app port
EXPOSE 8080

# Run the native binary
ENTRYPOINT ["./lurniq-api"]
